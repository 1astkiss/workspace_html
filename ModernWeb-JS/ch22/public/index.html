<!DOCTYPE html>
<html>
<head>
    <title>XMLHttpRequest</title>
    <script src="jquery-3.2.1.js"></script>

    <script>
        var request = new XMLHttpRequest();

        //request.open('GET', '/data.html', true);
        //request.send();
        //request.onreadystatechange = function (event) {
        //    if (request.readyState == 4) {
        //        if (request.status == 200) {
        //            document.body.innerHTML += request.responseText;
        //        }
        //    }
        //};

        //request.open('GET', '/data.json', true);
        //request.send();
        //request.onreadystatechange = function (event) {
        //    if (request.readyState == 4) {
        //        if (request.status == 200) {
        //            var json = eval('(' + request.responseText + ')');
        //            var output = '';

        //            for (var i = 0; i < json.length; i++) {
        //                for (var key in json[i]) {
        //                    output += '<h1>' + i + ':' + json[i][key] + '</h1>';
        //                }
        //            }
        //            document.body.innerHTML += output;
        //        }
        //    }
        //};

        //request.open('GET', '/data.xml', true);
        //request.send();
        //request.onreadystatechange = function (event) {
        //    if (request.readyState == 4) {
        //        if (request.status == 200) {
        //            var xml = request.responseXML;

        //            var names = xml.getElementsByTagName('name');
        //            var prices = xml.getElementsByTagName('price');

        //            for (var i = 0; i < names.length; i++) {
        //                var name = names[i].childNodes[0].nodeValue;
        //                var price = prices[i].childNodes[0].nodeValue;
        //                document.body.innerHTML += '<h1>' + name + '</h1>';
        //                document.body.innerHTML += '<h2>' + price + '</h2>';
        //            }
        //        }
        //    }
        //};

        window.onload = function () {
            document.getElementById('get').onclick = function () {
                var request = new XMLHttpRequest();
                request.open('GET', '/products', true);
                request.send();
                request.onreadystatechange = function (event) {
                    if (request.readyState == 4) {
                        if (request.status == 200) {
                            document.getElementById('output').value = request.responseText;
                        }
                    }
                }
            };
            document.getElementById('post').onclick = function () {
                var name = document.getElementById('name').value;
                var price = document.getElementById('price').value;
                var request = new XMLHttpRequest();
                request.open('POST', '/products', true);
                request.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
                request.send('name=' + name + '&price=' + price);
                request.onreadystatechange = function (event) {
                    if (request.readyState == 4) {
                        if (request.status == 200) {
                            document.getElementById('output').value = request.responseText;
                        }
                    }
                }
            };
            document.getElementById('put').onclick = function () {
                var name = document.getElementById('name').value;
                var price = document.getElementById('price').value;
                var request = new XMLHttpRequest();
                request.open('PUT', '/products/0', true);
                request.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
                request.send('name=' + name + '&price=' + price);
                request.onreadystatechange = function (event) {
                    if (request.readyState == 4) {
                        if (request.status == 200) {
                            document.getElementById('output').value = request.responseText;
                        }
                    }
                }
            };
            document.getElementById('delete').onclick = function () {
                var name = document.getElementById('name').value;
                var price = document.getElementById('price').value;
                var request = new XMLHttpRequest();
                request.open('DELETE', '/products/0', true);
                request.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
                request.send();
                request.onreadystatechange = function (event) {
                    if (request.readyState == 4) {
                        if (request.status == 200) {
                            document.getElementById('output').value = request.responseText;
                        }
                    }
                }
            };
        }

    </script>
</head>

<body>
    <button id="get">GET</button>
    <button id="post">POST</button>
    <button id="put">PUT</button>
    <button id="delete">DELETE</button>

    <h1>input</h1>
    <input id="name" placeholder="name" />
    <input id="price" placeholder="price"/>
    <h1>output</h1>
    <textarea id="output" disabled="disabled" cols="50" rows="5"></textarea>
</body>
</html>